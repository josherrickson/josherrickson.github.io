<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Stata</title>
  <meta name="description" content="Introduction to Stata">
  <meta name="generator" content="bookdown 0.6.2 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Stata" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Stata" />
  
  
  

<meta name="author" content="Josh Errickson">


<meta name="date" content="2018-02-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="programming.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="css/standard_html.css" type="text/css" />
<link rel="stylesheet" href="css/book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction to Stata</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-document"><i class="fa fa-check"></i><b>1.1</b> How to use this document</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#contact-information"><i class="fa fa-check"></i><b>1.2</b> Contact information</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#cscar"><i class="fa fa-check"></i><b>1.2.1</b> CSCAR</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#author"><i class="fa fa-check"></i><b>1.2.2</b> Author</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>1.3</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#the-stata-environment"><i class="fa fa-check"></i><b>2.1</b> The Stata Environment</a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#give-stata-a-command"><i class="fa fa-check"></i><b>2.2</b> Give Stata a command</a><ul>
<li class="chapter" data-level="2.2.1" data-path="basics.html"><a href="basics.html#dyndoc"><i class="fa fa-check"></i><b>2.2.1</b> dyndoc</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#basic-command-syntax"><i class="fa fa-check"></i><b>2.3</b> Basic command syntax</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basics.html"><a href="basics.html#referring-to-variables"><i class="fa fa-check"></i><b>2.3.1</b> Referring to variables</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#working-directory"><i class="fa fa-check"></i><b>2.4</b> Working directory</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-data-sets.html"><a href="working-with-data-sets.html"><i class="fa fa-check"></i><b>3</b> Working with Data Sets</a><ul>
<li class="chapter" data-level="3.1" data-path="working-with-data-sets.html"><a href="working-with-data-sets.html#built-in-data"><i class="fa fa-check"></i><b>3.1</b> Built-in data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-data-sets.html"><a href="working-with-data-sets.html#stata-website-data"><i class="fa fa-check"></i><b>3.1.1</b> Stata Website Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-data-sets.html"><a href="working-with-data-sets.html#importing-from-a-file-not-supported-directly-by-stata"><i class="fa fa-check"></i><b>3.1.2</b> Importing from a file not supported directly by Stata</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-data-sets.html"><a href="working-with-data-sets.html#exercise-1"><i class="fa fa-check"></i><b>3.2</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-management.html"><a href="data-management.html"><i class="fa fa-check"></i><b>4</b> Data Management</a><ul>
<li class="chapter" data-level="4.1" data-path="data-management.html"><a href="data-management.html#data-notes"><i class="fa fa-check"></i><b>4.1</b> Data Notes</a></li>
<li class="chapter" data-level="4.2" data-path="data-management.html"><a href="data-management.html#compress"><i class="fa fa-check"></i><b>4.2</b> <code>compress</code></a></li>
<li class="chapter" data-level="4.3" data-path="data-management.html"><a href="data-management.html#labels"><i class="fa fa-check"></i><b>4.3</b> Labels</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-management.html"><a href="data-management.html#label-variable"><i class="fa fa-check"></i><b>4.3.1</b> <code>label variable</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="data-management.html"><a href="data-management.html#changing-variable-ordering"><i class="fa fa-check"></i><b>4.3.2</b> Changing variable ordering</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-management.html"><a href="data-management.html#exercise-3"><i class="fa fa-check"></i><b>4.4</b> Exercise 3</a></li>
<li class="chapter" data-level="4.5" data-path="data-management.html"><a href="data-management.html#summarizing-the-data"><i class="fa fa-check"></i><b>4.5</b> Summarizing the data</a></li>
<li class="chapter" data-level="4.6" data-path="data-management.html"><a href="data-management.html#exercise-4"><i class="fa fa-check"></i><b>4.6</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>5</b> Data Manipulation</a><ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation.html"><a href="data-manipulation.html#generate"><i class="fa fa-check"></i><b>5.1</b> <code>generate</code></a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#creating-dummies"><i class="fa fa-check"></i><b>5.1.1</b> Creating dummies</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-manipulation.html"><a href="data-manipulation.html#extension-to-generate"><i class="fa fa-check"></i><b>5.1.2</b> Extension to <code>generate</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-manipulation.html"><a href="data-manipulation.html#replace"><i class="fa fa-check"></i><b>5.2</b> <code>replace</code></a></li>
<li class="chapter" data-level="5.3" data-path="data-manipulation.html"><a href="data-manipulation.html#sorting"><i class="fa fa-check"></i><b>5.3</b> sorting</a></li>
<li class="chapter" data-level="5.4" data-path="data-manipulation.html"><a href="data-manipulation.html#exercise-5"><i class="fa fa-check"></i><b>5.4</b> Exercise 5</a></li>
<li class="chapter" data-level="5.5" data-path="data-manipulation.html"><a href="data-manipulation.html#merging-files"><i class="fa fa-check"></i><b>5.5</b> Merging Files</a></li>
<li class="chapter" data-level="5.6" data-path="data-manipulation.html"><a href="data-manipulation.html#reshaping-files"><i class="fa fa-check"></i><b>5.6</b> Reshaping Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>6</b> Programming</a><ul>
<li class="chapter" data-level="6.1" data-path="programming.html"><a href="programming.html#macros"><i class="fa fa-check"></i><b>6.1</b> Macros</a><ul>
<li class="chapter" data-level="6.1.1" data-path="programming.html"><a href="programming.html#class-and-return"><i class="fa fa-check"></i><b>6.1.1</b> Class and Return</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="programming.html"><a href="programming.html#loops"><i class="fa fa-check"></i><b>6.2</b> loops</a><ul>
<li class="chapter" data-level="6.2.1" data-path="programming.html"><a href="programming.html#quietly"><i class="fa fa-check"></i><b>6.2.1</b> <code>quietly</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>7</b> Appendix</a><ul>
<li class="chapter" data-level="7.1" data-path="appendix.html"><a href="appendix.html#solutions"><i class="fa fa-check"></i><b>7.1</b> Solutions</a><ul>
<li class="chapter" data-level="7.1.1" data-path="appendix.html"><a href="appendix.html#exercise-1-1"><i class="fa fa-check"></i><b>7.1.1</b> Exercise 1</a></li>
<li class="chapter" data-level="7.1.2" data-path="appendix.html"><a href="appendix.html#exercise-4-1"><i class="fa fa-check"></i><b>7.1.2</b> Exercise 4</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Stata</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Appendix</h1>
<div id="solutions" class="section level2">
<h2><span class="header-section-number">7.1</span> Solutions</h2>
<div id="exercise-1-1" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Exercise 1</h3>
<a target="_blank" href="working-with-data-sets.html#exercise-1">Exercise 1</a>
1:
<pre><code>sysuse lifeexp
</code></pre>
3:
<pre><code>sysuse sandstone, clear
</code></pre>
or
<pre><code>clear
sysuse sandstone
</code></pre>
4: If the working directory isn’t convenient, change it using the dialogue box. Then, <code>save sandstone</code>.
### Exercise 2
<a target="_blank" href="data-management.html#exercise-2">Exercise 2</a>
1:
<pre><code>webuse census9, clear
</code></pre>
2: Data is from the 1980 census, which we can see by the label (visible in <code>describe, simple</code>). We’ve got two identifiers of state, death rate, population, median age and census region.
3: Since there data has 50 rows, it’s a good guess there are no missing sates.
4: Looking at <code>describe</code>, we see that the two state identifiers are strings, the rest numeric.
5: <code>compress</code>. Nothing saved! Because Stata already did it before posting it!
### Exercise 3
<a target="_blank" href="data-management.html#exercise-3">Exercise 3</a>
1:
<pre><code>. webuse census9, clear
(1980 Census data by state)

. save mycensus9
file mycensus9.dta saved

</code></pre>
2:
<pre><code>. rename drate deathrate

. label variable deathrate &quot;Death rate per 10,000&quot;

</code></pre>
3:
<pre><code>. tab region

     Census |
     region |      Freq.     Percent        Cum.
------------+-----------------------------------
         NE |          9       18.00       18.00
    N Cntrl |         12       24.00       42.00
      South |         16       32.00       74.00
       West |         13       26.00      100.00
------------+-----------------------------------
      Total |         50      100.00

. label list cenreg
cenreg:
           1 NE
           2 N Cntrl
           3 South
           4 West

. label define region_label 1 &quot;Northeast&quot; 2 &quot;North Central&quot; 3 &quot;South&quot; 4 &quot;West&quot;

. label values region region_label

. label drop cenreg

. label list
region_label:
           1 Northeast
           2 North Central
           3 South
           4 West

. tab region

Census region |      Freq.     Percent        Cum.
--------------+-----------------------------------
    Northeast |          9       18.00       18.00
North Central |         12       24.00       42.00
        South |         16       32.00       74.00
         West |         13       26.00      100.00
--------------+-----------------------------------
        Total |         50      100.00

</code></pre>
4:
<pre><code>. save, replace
file mycensus9.dta saved

</code></pre>
</div>
<div id="exercise-4-1" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Exercise 4</h3>
<a target="_blank" href="data-management.html#exercise-4">Exercise 4</a>
1: Use <code>summarize</code> and <code>codebook</code> to take a look at the mean/max/min. No errors detected/
2:
<pre><code>. codebook, compact

Variable   Obs Unique     Mean     Min       Max  Label
-------------------------------------------------------------------------------
state       50     50        .       .         .  State
state2      50     50        .       .         .  Two-letter state abbreviation
deathrate   50     30     84.3      40       107  Death rate per 10,000
pop         50     50  4518149  401851  2.37e+07  Population
medage      50     37    29.54    24.2      34.7  Median age
region      50      4     2.66       1         4  Census region
-------------------------------------------------------------------------------

</code></pre>
<code>deathrate</code> and <code>medage</code> both have less than 50 unique values. This is due to both being heavily rounded. If we saw more precision, there would be more unique entires.
3:
<pre><code>. codebook, problems

   Potential problems in dataset   mycensus9.dta

               potential problem   variables
--------------------------------------------------
  string vars with embedded blanks   state
--------------------------------------------------

</code></pre>
This just flags spaces (&quot; “) in the data. Not a real problem!
### Exercise 5
<a target="_blank" href="data-manipulation.html#exercise-5">Exercise 5</a>
1:
<pre><code>. gen deathperc = deathrate/10000

. label variable deathperc &quot;Percentage of population deceeased in 1980&quot;

. list death* in 1/5

     +---------------------+
     | deathr~e   deathp~c |
     |---------------------|
  1. |       91      .0091 |
  2. |       40       .004 |
  3. |       78      .0078 |
  4. |       99      .0099 |
  5. |       79      .0079 |
     +---------------------+

</code></pre>
2:
<pre><code>. gen agecat = 1 if medage &lt; .

. replace agecat = 2 if medage &gt; 26.2 &amp; medage &lt;= 30.1
(30 real changes made)

. replace agecat = 3 if medage &gt; 30.1 &amp; medage &lt;= 32.8
(17 real changes made)

. replace agecat = 4 if medage &gt; 32.8
(1 real change made)

. label define agecat_label 1 &quot;Significantly below national average&quot; ///
&gt;                           2 &quot;Below national average&quot; ///
&gt;                           3 &quot;Above national average&quot; ///
&gt;                           4 &quot;Significantly above national average&quot;

. label values agecat agecat_label

. tab agecat, mi

                              agecat |      Freq.     Percent        Cum.
-------------------------------------+-----------------------------------
Significantly below national average |          2        4.00        4.00
              Below national average |         30       60.00       64.00
              Above national average |         17       34.00       98.00
Significantly above national average |          1        2.00      100.00
-------------------------------------+-----------------------------------
                               Total |         50      100.00

</code></pre>
We have no missing data (seen with <code>summarize</code> and <code>codebook</code> in the previous exercise) but it’s good practice to check for them anyways.
3:
<pre><code>. bysort agecat: summarize deathrate

-------------------------------------------------------------------------------
-&gt; agecat = Significantly below national average

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   deathrate |          2        47.5     10.6066         40         55

-------------------------------------------------------------------------------
-&gt; agecat = Below national average

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   deathrate |         30    81.76667    9.761583         50         94

-------------------------------------------------------------------------------
-&gt; agecat = Above national average

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   deathrate |         17    91.76471    8.422659         73        104

-------------------------------------------------------------------------------
-&gt; agecat = Significantly above national average

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   deathrate |          1         107           .        107        107


</code></pre>
We see that the groups with the higher median age tend to have higher deathrates.
4:
<pre><code>. preserve

. gsort -deathrate

. list state deathrate in 1

     +--------------------+
     | state     deathr~e |
     |--------------------|
  1. | Florida        107 |
     +--------------------+

. gsort +deathrate

. list state deathrate in 1

     +-------------------+
     | state    deathr~e |
     |-------------------|
  1. | Alaska         40 |
     +-------------------+

. gsort -medage

. list state medage in 1

     +------------------+
     | state     medage |
     |------------------|
  1. | Florida    34.70 |
     +------------------+

. gsort +medage

. list state medage in 1

     +----------------+
     | state   medage |
     |----------------|
  1. | Utah     24.20 |
     +----------------+

. restore

</code></pre>
5:
<pre><code>. encode state2, gen(statecodes)

. codebook statecodes

-------------------------------------------------------------------------------
statecodes                                        Two-letter state abbreviation
-------------------------------------------------------------------------------

                  type:  numeric (long)
                 label:  statecodes

                 range:  [1,50]                       units:  1
         unique values:  50                       missing .:  0/50

              examples:  10    GA
                         20    MD
                         30    NH
                         40    SC

</code></pre>

</div>
</div>
</div>






















            </section>

          </div>
        </div>
      </div>
<a href="programming.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
